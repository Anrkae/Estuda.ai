<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plataforma de Simulados</title>
    <link rel="stylesheet" href="simul.css">
    <!-- FontAwesome CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- Sortable.js CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
    
    <script src="//cdn.jsdelivr.net/npm/eruda"></script>
    <script>eruda.init();</script>
    
</head>
<body>
    <div class="container">
        <header class="main-header">
            <h1>Gerador de Simulados</h1>
        </header>

        <!-- Seção de Configuração do Simulado -->
        <section id="configSimuladoSection" class="config-section">
            <h2>Configurar Simulado</h2>
            <div class="form-grid">
                <div class="form-group">
                    <label for="disciplinasSimuladoSelect"><i class="fas fa-book"></i> Disciplinas (selecione uma ou mais):</label>
                    <select id="disciplinasSimuladoSelect" multiple></select>
                    <button id="gerenciarDisciplinasSimuladoBtn" class="btn-secondary"><i class="fas fa-edit"></i> Gerenciar Disciplinas</button>
                </div>

                <div id="assuntosPorDisciplinaContainer" class="form-group full-width" style="display: none;">
                    <label><i class="fas fa-tasks"></i> Assuntos por Disciplina (informe os tópicos separados por vírgula):</label>
                    <!-- Inputs de assunto serão gerados dinamicamente aqui -->
                </div>

                <div class="form-group">
                    <label for="numTotalQuestoesInput"><i class="fas fa-list-ol"></i> Número Total de Questões:</label>
                    <input type="number" id="numTotalQuestoesInput" min="1" max="100" value="10">
                </div>

                <div id="questoesPorDisciplinaContainer" class="form-group full-width" style="display: none;">
                    <label><i class="fas fa-divide"></i> Número de Questões por Disciplina (opcional):</label>
                    <!-- Inputs de número de questões por disciplina serão gerados dinamicamente aqui -->
                </div>
                
                <div class="form-group full-width">
                    <label><i class="fas fa-sort-amount-down"></i> Prioridade das Disciplinas (arraste para reordenar):</label>
                    <ul id="listaPrioridadeDisciplinas" class="sortable-list">
                        <!-- Disciplinas selecionadas para priorização aparecerão aqui -->
                    </ul>
                </div>

                <div class="form-group">
                    <label for="tempoSimuladoInput"><i class="fas fa-clock"></i> Tempo de Simulado (minutos):</label>
                    <input type="number" id="tempoSimuladoInput" min="10" value="60">
                </div>

                <div class="form-group">
                    <label for="nivelDificuldadeSimuladoSelect"><i class="fas fa-signal"></i> Nível de Dificuldade:</label>
                    <select id="nivelDificuldadeSimuladoSelect">
                        <option value="Facil">Fácil</option>
                        <option value="Medio" selected>Médio</option>
                        <option value="Dificil">Difícil</option>
                        <option value="Variado">Variado</option>
                    </select>
                </div>
            </div>
            <button id="gerarSimuladoButton" class="btn-principal"><i class="fas fa-cogs"></i> Gerar Simulado</button>
        </section>

        <!-- Tela de Carregamento Interativa -->
        <section id="loadingScreen" style="display: none;">
            <div class="loading-content">
                <div class="spinner">
                    <div class="dot1"></div>
                    <div class="dot2"></div>
                </div>
                <h2>Gerando seu simulado...</h2>
                <p id="motivationalMessageLoading">Respire fundo, a preparação é a chave!</p>
                <div class="progress-bar-container">
                    <div id="generationProgressBar" class="progress-bar"></div>
                </div>
            </div>
        </section>

        <!-- Aba de Resolução de Questões -->
        <section id="resolucaoSimuladoSection" style="display: none;">
            <div class="simulado-header">
                <h2 id="simuladoTitulo">Simulado em Andamento</h2>
                <div id="timerDisplay"><i class="fas fa-stopwatch"></i> Tempo Restante: <span id="tempoRestante">00:00:00</span></div>
            </div>
            <div id="questoesSimuladoOutput">
                <!-- Questões do simulado serão listadas aqui -->
            </div>
            <button id="finalizarSimuladoBtn" class="btn-finalizar"><i class="fas fa-flag-checkered"></i> Finalizar Simulado</button>
        </section>

        <!-- Painel Flutuante de Controle -->
        <div id="floatingControlPanel" style="display: none;">
            <button id="togglePainelBtn" class="panel-toggle-btn"><i class="fas fa-bars"></i></button>
            <div class="panel-content">
                <h3>Controle do Simulado</h3>
                <div id="progressoSimuladoRealTime">
                    <p>Progresso: <span id="questoesRespondidasProgresso">0</span>/<span id="totalQuestoesProgresso">0</span> (<span id="porcentagemProgresso">0</span>%)</p>
                </div>
                <button id="pausarRetomarSimuladoBtn" class="btn-panel"><i class="fas fa-pause"></i> Pausar</button>
                <button id="finalizarSimuladoPainelBtn" class="btn-panel btn-finalizar-panel"><i class="fas fa-stop-circle"></i> Finalizar Simulado</button>
            </div>
        </div>

        <!-- Popup de Gerenciamento de Disciplinas (similar ao da outra página) -->
        <div id="disciplinasSimuladoPopupOverlay" class="popup-overlay minimizable-popup-overlay">
            <div id="disciplinasSimuladoPopupBox" class="popup-message-box minimizable-popup">
                <div class="popup-header">
                    <h3 id="disciplinasSimuladoPopupTitle"><i class="fas fa-edit"></i> Gerenciar Disciplinas do Simulado</h3>
                    <div>
                        <button id="minimizeDisciplinasSimuladoPopup" class="popup-control-btn"><i class="fas fa-minus"></i></button>
                        <button id="closeDisciplinasSimuladoPopup" class="popup-control-btn"><i class="fas fa-times"></i></button>
                    </div>
                </div>
                <div id="disciplinasSimuladoPopupContent" class="popup-content-area">
                    <div class="form-group">
                        <label for="novaDisciplinaSimuladoInput">Adicionar Nova Disciplina:</label>
                        <input type="text" id="novaDisciplinaSimuladoInput" placeholder="Nome da Disciplina">
                        <button id="addDisciplinaSimuladoButton" class="btn-add"><i class="fas fa-plus-circle"></i> Adicionar</button>
                    </div>
                    <h4>Disciplinas Existentes:</h4>
                    <ul id="listaDisciplinasSimuladoExistentes">
                        <!-- Lista de disciplinas -->
                    </ul>
                </div>
            </div>
        </div>

        <!-- Popup de Resumo do Simulado -->
        <div id="resumoSimuladoPopupOverlay" class="popup-overlay">
            <div id="resumoSimuladoPopupBox" class="popup-message-box">
                <div class="popup-header-icon" id="resumoPopupIcon"></div>
                <h3 id="resumoPopupTitle">Resumo do Simulado</h3>
                <div id="resumoPopupContent"></div>
                <div class="popup-actions">
                    <button id="revisarSimuladoBtn" class="btn-secondary"><i class="fas fa-search"></i> Revisar Gabarito</button>
                    <button id="fecharResumoSimuladoBtn" class="popup-close-button"><i class="fas fa-times"></i> Fechar</button>
                </div>
            </div>
        </div>

         <!-- Seção de Revisão do Simulado (Gabarito) -->
        <section id="revisaoSimuladoSection" style="display: none;">
            <h2>Gabarito do Simulado</h2>
            <div id="gabaritoSimuladoOutput">
                <!-- Gabarito detalhado será exibido aqui -->
            </div>
            <button id="voltarParaConfigSimuladoBtn" class="btn-secondary"><i class="fas fa-arrow-left"></i> Voltar para Configuração</button>
        </section>

    </div>
    <script src="simul.js"></script>
</body>
</html>
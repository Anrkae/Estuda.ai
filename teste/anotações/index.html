<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Estuda AI - Anotações</title>

    <!-- Bibliotecas Externas -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script type="module">
        import autoAnimate from 'https://cdn.jsdelivr.net/npm/@formkit/auto-animate@0.8.2/index.mjs'
        window.autoAnimate = autoAnimate;
    </script>
    
    <!-- Nosso arquivo de estilos -->
    <link rel="stylesheet" href="anotacoes.css">
</head>
<body class="bg-gray-100 text-gray-800 font-sans antialiased">

    <!-- Container Principal -->
    <div id="app-container" class="max-w-lg mx-auto bg-white min-h-screen shadow-lg">
        
        <!-- 1. Tela Principal (Explorador) -->
        <div id="explorer-view">
            <!-- ... (código do header e nav sem alterações) ... -->
            <header class="p-4 border-b border-gray-200 sticky top-0 bg-white z-20">
                <h1 class="text-xl font-bold text-center text-blue-600">Estuda AI</h1>
            </header>
            <nav class="flex justify-around border-b border-gray-200 sticky top-[73px] bg-white z-20">
                <button id="tab-resumos" class="w-full p-4 text-center border-b-2 border-transparent">Resumos</button>
                <button id="tab-flashcards" class="w-full p-4 text-center border-b-2 border-transparent">Flashcards</button>
            </nav>
            <main class="p-4">
                <div id="breadcrumbs" class="flex items-center text-sm text-gray-500 mb-4 overflow-x-auto whitespace-nowrap"></div>
                <div id="item-list"></div>
            </main>
            <button id="add-fab" class="fixed bottom-6 right-6 bg-blue-600 text-white rounded-full p-4 shadow-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 transition-transform transform hover:scale-110">
                <i data-lucide="plus"></i>
            </button>
        </div>

        <!-- 2. Tela de Visualização de Resumo -->
        <div id="resumo-view" class="hidden">
            <header class="p-4 border-b border-gray-200 flex items-center gap-2 sticky top-0 bg-white z-20">
                <button id="view-resumo-back-btn" class="p-2 hover:bg-gray-100 rounded-full"><i data-lucide="arrow-left"></i></button>
                <h2 id="resumo-view-title" class="text-xl font-bold truncate"></h2>
            </header>
            <div id="resumo-view-content" class="p-5 prose">
                <!-- Conteúdo do resumo renderizado será inserido aqui -->
            </div>
        </div>
        
        <!-- 3. Tela de Edição de Resumo -->
        <div id="resumo-edit-view" class="hidden">
            <header class="p-4 border-b border-gray-200 flex items-center gap-2 sticky top-0 bg-white z-20">
                <button id="edit-resumo-back-btn" class="p-2 hover:bg-gray-100 rounded-full"><i data-lucide="arrow-left"></i></button>
                <input type="text" id="resumo-edit-title" class="text-xl font-bold bg-transparent focus:outline-none w-full" placeholder="Título do resumo...">
                <button id="resumo-save-btn" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 whitespace-nowrap">Salvar</button>
            </header>
            <textarea id="resumo-textarea" class="w-full h-[calc(100vh-74px)] p-4 text-base leading-7 focus:outline-none" placeholder="Escreva seu resumo aqui..."></textarea>
        </div>

        <!-- 4. Tela de Visualização de Baralho -->
        <div id="deck-view" class="hidden">
            <!-- ... (código da tela de baralho sem alterações) ... -->
            <header class="p-4 border-b border-gray-200 flex items-center gap-2 sticky top-0 bg-white z-20">
                <button id="deck-back-btn" class="p-2 hover:bg-gray-100 rounded-full"><i data-lucide="arrow-left"></i></button>
                <h2 id="deck-title" class="text-xl font-bold truncate"></h2>
            </header>
            <main class="p-4">
                <button id="add-card-btn" class="w-full flex items-center justify-center gap-2 mb-4 bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-4 rounded-lg transition-colors">
                    <i data-lucide="plus-circle"></i>
                    <span>Adicionar Novo Cartão</span>
                </button>
                <div id="card-list"></div>
            </main>
        </div>
    </div>

    <!-- Modais -->
    <div id="modals-container">
        <!-- ... (código dos modais sem alterações) ... -->
        <div id="add-choice-modal" class="modal-backdrop hidden">
            <div class="modal-content">
                <h3 class="text-lg font-semibold mb-4 text-center">O que deseja criar?</h3>
                <div id="add-choice-options" class="space-y-3"></div>
                <button id="close-choice-modal" class="w-full mt-6 bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg transition-colors">Cancelar</button>
            </div>
        </div>
        <div id="create-item-modal" class="modal-backdrop hidden">
            <div class="modal-content">
                <h3 id="create-modal-title" class="text-lg font-semibold mb-4"></h3>
                <input type="text" id="create-modal-input" class="w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                <div class="flex justify-end gap-3 mt-4">
                    <button class="modal-cancel-btn bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-lg">Cancelar</button>
                    <button id="confirm-create-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg">Criar</button>
                </div>
            </div>
        </div>
        <div id="ai-generate-modal" class="modal-backdrop hidden">
            <div class="modal-content">
                <h3 id="ai-modal-title" class="text-lg font-semibold mb-4"></h3>
                <p class="text-sm text-gray-600 mb-3">Ex: "Capitais da Europa", "Ciclo de Krebs"</p>
                <input type="text" id="ai-modal-input" class="w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Digite um tópico...">
                <div class="flex justify-end gap-3 mt-4">
                    <button class="modal-cancel-btn bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-lg">Cancelar</button>
                    <button id="confirm-ai-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2">
                        <i data-lucide="sparkles" class="w-4 h-4"></i><span>Gerar</span>
                    </button>
                </div>
            </div>
        </div>
        <div id="edit-card-modal" class="modal-backdrop hidden">
            <div class="modal-content">
                <h3 class="text-lg font-semibold mb-4">Editar Cartão</h3>
                <div class="space-y-4">
                    <div>
                        <label for="edit-card-front" class="block text-sm font-medium text-gray-700 mb-1">Frente</label>
                        <textarea id="edit-card-front" rows="3" class="w-full border border-gray-300 rounded-md p-2"></textarea>
                    </div>
                    <div>
                        <label for="edit-card-back" class="block text-sm font-medium text-gray-700 mb-1">Verso</label>
                        <textarea id="edit-card-back" rows="3" class="w-full border border-gray-300 rounded-md p-2"></textarea>
                    </div>
                </div>
                <div class="flex justify-end gap-3 mt-4">
                    <button class="modal-cancel-btn bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-lg">Cancelar</button>
                    <button id="confirm-edit-card-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg">Salvar</button>
                </div>
            </div>
        </div>
        <div id="loading-modal" class="modal-backdrop hidden">
            <div class="bg-white rounded-lg shadow-xl p-8 w-11/12 max-w-xs text-center">
                <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"></div>
                <p id="loading-message" class="mt-4 text-gray-700 font-semibold">Gerando com IA...</p>
            </div>
        </div>
    </div>

    <!-- Nosso arquivo de script -->
    <script type="module" src="anotacoes.js"></script>
</body>
</html>
